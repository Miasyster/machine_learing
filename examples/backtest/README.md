# å›æµ‹å¼•æ“ä½¿ç”¨ç¤ºä¾‹

æœ¬ç›®å½•åŒ…å«äº†å›æµ‹å¼•æ“çš„å®Œæ•´ä½¿ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬çš„å›æµ‹æ¡†æ¶è¿›è¡Œé‡åŒ–ç­–ç•¥å¼€å‘å’Œæµ‹è¯•ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
examples/backtest/
â”œâ”€â”€ README.md                          # æœ¬æ–‡ä»¶
â”œâ”€â”€ basic_backtest_example.py          # åŸºç¡€å›æµ‹ç¤ºä¾‹
â”œâ”€â”€ vectorbt_example.py                # VectorBTé›†æˆç¤ºä¾‹
â””â”€â”€ advanced_strategies_example.py     # é«˜çº§ç­–ç•¥ç¤ºä¾‹
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºç¡€å›æµ‹ç¤ºä¾‹ (`basic_backtest_example.py`)

è¿™æ˜¯æœ€ç®€å•çš„å…¥é—¨ç¤ºä¾‹ï¼Œå±•ç¤ºäº†ï¼š
- å¦‚ä½•ç”Ÿæˆç¤ºä¾‹æ•°æ®
- å¦‚ä½•é…ç½®å›æµ‹å‚æ•°
- å¦‚ä½•å®ç°ç®€å•çš„ç§»åŠ¨å¹³å‡ç­–ç•¥
- å¦‚ä½•è¿è¡Œå›æµ‹å¹¶åˆ†æç»“æœ

```python
# è¿è¡ŒåŸºç¡€ç¤ºä¾‹
python basic_backtest_example.py
```

**åŒ…å«çš„ç­–ç•¥ï¼š**
- ç®€å•ç§»åŠ¨å¹³å‡äº¤å‰ç­–ç•¥
- ä¹°å…¥æŒæœ‰ç­–ç•¥ï¼ˆåŸºå‡†ï¼‰

**ä¸»è¦åŠŸèƒ½ï¼š**
- æ•°æ®ç”Ÿæˆå’Œå¤„ç†
- ç­–ç•¥å®ç°å’Œå›æµ‹
- ç»“æœåˆ†æå’Œå¯è§†åŒ–
- æŠ¥å‘Šç”Ÿæˆ

### 2. VectorBTé›†æˆç¤ºä¾‹ (`vectorbt_example.py`)

å±•ç¤ºå¦‚ä½•ä½¿ç”¨VectorBTè¿›è¡Œé«˜æ€§èƒ½å‘é‡åŒ–å›æµ‹ï¼š
- å¤šç­–ç•¥å¹¶è¡Œå›æµ‹
- å‚æ•°ä¼˜åŒ–
- æ€§èƒ½å¯¹æ¯”åˆ†æ

```python
# è¿è¡ŒVectorBTç¤ºä¾‹
python vectorbt_example.py
```

**åŒ…å«çš„ç­–ç•¥ï¼š**
- ç§»åŠ¨å¹³å‡äº¤å‰ç­–ç•¥ï¼ˆå¤šå‚æ•°ç»„åˆï¼‰
- RSIç­–ç•¥
- å‡å€¼å›å½’ç­–ç•¥
- åŠ¨é‡ç­–ç•¥

**ä¸»è¦åŠŸèƒ½ï¼š**
- å‘é‡åŒ–å›æµ‹å¼•æ“
- å¤šç­–ç•¥æ€§èƒ½å¯¹æ¯”
- å‚æ•°ä¼˜åŒ–
- é«˜æ€§èƒ½è®¡ç®—

### 3. é«˜çº§ç­–ç•¥ç¤ºä¾‹ (`advanced_strategies_example.py`)

å±•ç¤ºå¤æ‚é‡åŒ–ç­–ç•¥çš„å®ç°ï¼š
- å¤šå› å­ç­–ç•¥
- é…å¯¹äº¤æ˜“ç­–ç•¥
- æœºå™¨å­¦ä¹ ç­–ç•¥

```python
# è¿è¡Œé«˜çº§ç­–ç•¥ç¤ºä¾‹
python advanced_strategies_example.py
```

**åŒ…å«çš„ç­–ç•¥ï¼š**
- å¤šå› å­é€‰è‚¡ç­–ç•¥
- ç»Ÿè®¡å¥—åˆ©é…å¯¹äº¤æ˜“
- æœºå™¨å­¦ä¹ é¢„æµ‹ç­–ç•¥
- ç­‰æƒé‡åŸºå‡†ç­–ç•¥

**ä¸»è¦åŠŸèƒ½ï¼š**
- å¤æ‚ç­–ç•¥å®ç°
- å¤šèµ„äº§ç›¸å…³æ€§å»ºæ¨¡
- æœºå™¨å­¦ä¹ é›†æˆ
- é«˜çº§é£é™©ç®¡ç†

## ğŸ“Š ç¤ºä¾‹ç‰¹æ€§

### æ•°æ®ç”Ÿæˆ
æ‰€æœ‰ç¤ºä¾‹éƒ½åŒ…å«æ•°æ®ç”ŸæˆåŠŸèƒ½ï¼Œæ— éœ€å¤–éƒ¨æ•°æ®æºï¼š
- æ¨¡æ‹ŸçœŸå®å¸‚åœºæ•°æ®
- æ”¯æŒå¤šèµ„äº§ç›¸å…³æ€§
- å¯é…ç½®çš„å¸‚åœºå‚æ•°

### ç­–ç•¥ç±»å‹
- **è¶‹åŠ¿è·Ÿè¸ª**ï¼šç§»åŠ¨å¹³å‡ã€åŠ¨é‡ç­–ç•¥
- **å‡å€¼å›å½’**ï¼šRSIã€ç»Ÿè®¡å¥—åˆ©
- **å¤šå› å­**ï¼šåŸºäºå¤šä¸ªæŠ€æœ¯å’ŒåŸºæœ¬é¢å› å­
- **æœºå™¨å­¦ä¹ **ï¼šä½¿ç”¨MLæ¨¡å‹è¿›è¡Œé¢„æµ‹

### åˆ†æåŠŸèƒ½
- å®Œæ•´çš„ç»©æ•ˆæŒ‡æ ‡è®¡ç®—
- é£é™©åˆ†æï¼ˆVaRã€æœ€å¤§å›æ’¤ç­‰ï¼‰
- å¯è§†åŒ–å›¾è¡¨ç”Ÿæˆ
- è¯¦ç»†æŠ¥å‘Šè¾“å‡º

## ğŸ› ï¸ ä¾èµ–è¦æ±‚

### åŸºç¡€ä¾èµ–
```bash
pip install pandas numpy matplotlib
```

### VectorBTç¤ºä¾‹é¢å¤–ä¾èµ–
```bash
pip install vectorbt
```

### æœºå™¨å­¦ä¹ ç¤ºä¾‹é¢å¤–ä¾èµ–
```bash
pip install scikit-learn
```

### å®Œæ•´ä¾èµ–å®‰è£…
```bash
pip install pandas numpy matplotlib vectorbt scikit-learn
```

## ğŸ“ˆ è¿è¡Œç¤ºä¾‹

### æ–¹æ³•1ï¼šç›´æ¥è¿è¡Œ
```bash
cd examples/backtest
python basic_backtest_example.py
```

### æ–¹æ³•2ï¼šä½œä¸ºæ¨¡å—å¯¼å…¥
```python
import sys
sys.path.append('path/to/examples/backtest')

from basic_backtest_example import run_basic_backtest
results = run_basic_backtest()
```

### æ–¹æ³•3ï¼šäº¤äº’å¼è¿è¡Œ
```python
# åœ¨Jupyter Notebookä¸­
%run basic_backtest_example.py
```

## ğŸ“‹ ç¤ºä¾‹è¾“å‡º

### æ§åˆ¶å°è¾“å‡º
æ¯ä¸ªç¤ºä¾‹éƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„è¿è¡Œä¿¡æ¯ï¼š
- æ•°æ®ç”Ÿæˆè¿›åº¦
- ç­–ç•¥æ‰§è¡Œæ—¥å¿—
- æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”
- åˆ†æç»“æœæ€»ç»“

### å›¾è¡¨è¾“å‡º
è‡ªåŠ¨ç”Ÿæˆå¤šç§åˆ†æå›¾è¡¨ï¼š
- æƒç›Šæ›²çº¿å¯¹æ¯”
- å›æ’¤åˆ†æ
- æ”¶ç›Šç‡åˆ†å¸ƒ
- é£é™©æ”¶ç›Šæ•£ç‚¹å›¾
- æ»šåŠ¨æŒ‡æ ‡å›¾è¡¨

### æ–‡ä»¶è¾“å‡º
- è¯¦ç»†çš„Markdownæ ¼å¼æŠ¥å‘Š
- å¯é€‰çš„CSVæ•°æ®å¯¼å‡º
- å›¾è¡¨æ–‡ä»¶ä¿å­˜

## ğŸ¯ å­¦ä¹ è·¯å¾„

### åˆå­¦è€…
1. ä» `basic_backtest_example.py` å¼€å§‹
2. ç†è§£åŸºæœ¬çš„å›æµ‹æµç¨‹
3. å­¦ä¹ ç­–ç•¥å®ç°æ–¹æ³•
4. æŒæ¡ç»“æœåˆ†ææŠ€å·§

### è¿›é˜¶ç”¨æˆ·
1. å­¦ä¹  `vectorbt_example.py` çš„å‘é‡åŒ–æ–¹æ³•
2. ç†è§£å‚æ•°ä¼˜åŒ–æŠ€æœ¯
3. æŒæ¡å¤šç­–ç•¥å¯¹æ¯”åˆ†æ

### é«˜çº§ç”¨æˆ·
1. ç ”ç©¶ `advanced_strategies_example.py` çš„å¤æ‚ç­–ç•¥
2. å­¦ä¹ å¤šå› å­æ¨¡å‹æ„å»º
3. æŒæ¡æœºå™¨å­¦ä¹ åœ¨é‡åŒ–ä¸­çš„åº”ç”¨
4. ç†è§£é£é™©ç®¡ç†æŠ€æœ¯

## ğŸ”§ è‡ªå®šä¹‰å¼€å‘

### åˆ›å»ºæ–°ç­–ç•¥
```python
class MyStrategy:
    def __init__(self, param1, param2):
        self.param1 = param1
        self.param2 = param2
        self.engine = None
        
    def set_engine(self, engine):
        self.engine = engine
        
    def on_bar(self, timestamp, bar_data):
        # å®ç°ä½ çš„ç­–ç•¥é€»è¾‘
        pass
```

### æ·»åŠ æ–°æŒ‡æ ‡
```python
def calculate_custom_indicator(prices, window):
    # å®ç°è‡ªå®šä¹‰æŠ€æœ¯æŒ‡æ ‡
    return indicator_values
```

### æ‰©å±•åˆ†æåŠŸèƒ½
```python
def custom_analysis(backtest_result):
    # å®ç°è‡ªå®šä¹‰åˆ†æ
    return analysis_result
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å›æµ‹å¼•æ“APIæ–‡æ¡£](../../src/backtest/README.md)
- [ç­–ç•¥å¼€å‘æŒ‡å—](../../docs/strategy_development.md)
- [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](../../docs/performance_optimization.md)
- [é£é™©ç®¡ç†æŒ‡å—](../../docs/risk_management.md)

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ çœŸå®æ•°æ®ï¼Ÿ
A: æ›¿æ¢ç¤ºä¾‹ä¸­çš„æ•°æ®ç”Ÿæˆå‡½æ•°ï¼Œä½¿ç”¨ä½ çš„æ•°æ®æºï¼š
```python
# æ›¿æ¢ç”Ÿæˆçš„æ•°æ®
data = pd.read_csv('your_data.csv', index_col=0, parse_dates=True)
engine.add_data(data, symbol)
```

### Q: å¦‚ä½•è°ƒæ•´å›æµ‹å‚æ•°ï¼Ÿ
A: ä¿®æ”¹BacktestConfigä¸­çš„å‚æ•°ï¼š
```python
config = BacktestConfig(
    initial_capital=100000.0,
    commission_model=PercentageCommissionModel(commission_rate=0.001),
    slippage_model=FixedSlippageModel(slippage_bps=5.0)
)
```

### Q: å¦‚ä½•ä¿å­˜å›æµ‹ç»“æœï¼Ÿ
A: ä½¿ç”¨åˆ†æå™¨çš„å¯¼å‡ºåŠŸèƒ½ï¼š
```python
analyzer = analyze_backtest_result(result)
analyzer.export_to_csv('backtest_results.csv')
```

### Q: å¦‚ä½•è¿›è¡Œå‚æ•°ä¼˜åŒ–ï¼Ÿ
A: å‚è€ƒvectorbt_example.pyä¸­çš„å‚æ•°ä¼˜åŒ–éƒ¨åˆ†ï¼Œæˆ–ä½¿ç”¨ç½‘æ ¼æœç´¢ï¼š
```python
for param1 in param1_range:
    for param2 in param2_range:
        strategy = MyStrategy(param1, param2)
        result = run_backtest(strategy)
        # è®°å½•ç»“æœ
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤æ–°çš„ç¤ºä¾‹å’Œæ”¹è¿›ï¼š
1. Forké¡¹ç›®
2. åˆ›å»ºæ–°çš„ç¤ºä¾‹æ–‡ä»¶
3. æ·»åŠ ç›¸åº”çš„æ–‡æ¡£
4. æäº¤Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬ç¤ºä¾‹ä»£ç éµå¾ªé¡¹ç›®çš„å¼€æºè®¸å¯è¯ã€‚

---

**å¼€å§‹ä½ çš„é‡åŒ–äº¤æ˜“ä¹‹æ—…ï¼** ğŸš€