# é›†æˆæ–¹æ³•ä½¿ç”¨æŒ‡å—

æœ¬ç›®å½•åŒ…å«äº†Stackingã€Blendingå’Œæ¨¡å‹æ ¡å‡†çš„å®Œæ•´å®ç°å’Œä½¿ç”¨ç¤ºä¾‹ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
examples/
â”œâ”€â”€ README.md              # æœ¬æ–‡æ¡£
â”œâ”€â”€ quick_start.py         # å¿«é€Ÿå…¥é—¨ç¤ºä¾‹
â””â”€â”€ ensemble_examples.py   # è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è¿è¡Œå¿«é€Ÿå…¥é—¨ç¤ºä¾‹

```bash
python examples/quick_start.py
```

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†ï¼š
- åŸºç¡€çš„Stackingå’ŒBlendingä½¿ç”¨
- æ¨¡å‹æ ¡å‡†
- æ€§èƒ½æ¯”è¾ƒ

### 2. æŸ¥çœ‹è¯¦ç»†ç¤ºä¾‹

```bash
python examples/ensemble_examples.py
```

è¿™ä¸ªç¤ºä¾‹åŒ…å«ï¼š
- å¤šç§é›†æˆç­–ç•¥
- å‚æ•°è°ƒä¼˜
- æ€§èƒ½åˆ†æ
- é”™è¯¯å¤„ç†æ¼”ç¤º

## ğŸ“š ä¸»è¦åŠŸèƒ½

### Stackingé›†æˆ
- **å¤šå±‚å †å **: æ”¯æŒå¤šå±‚æ¨¡å‹å †å 
- **äº¤å‰éªŒè¯**: é¿å…è¿‡æ‹Ÿåˆ
- **æ¦‚ç‡èåˆ**: ä½¿ç”¨é¢„æµ‹æ¦‚ç‡è€Œéç¡¬é¢„æµ‹
- **ç‰¹å¾ç»„åˆ**: å¯é€‰æ‹©æ˜¯å¦åœ¨å…ƒå­¦ä¹ ä¸­ä½¿ç”¨åŸå§‹ç‰¹å¾

### Blendingé›†æˆ
- **ä¿ç•™é›†éªŒè¯**: ä½¿ç”¨ç‹¬ç«‹çš„éªŒè¯é›†ç”Ÿæˆå…ƒç‰¹å¾
- **åŠ¨æ€æƒé‡**: æ”¯æŒåŠ¨æ€è°ƒæ•´æ¨¡å‹æƒé‡
- **è‡ªé€‚åº”ç­–ç•¥**: æ ¹æ®æ¨¡å‹æ€§èƒ½è‡ªåŠ¨è°ƒæ•´

### æ¨¡å‹æ ¡å‡†
- **Plattæ ¡å‡†**: ä½¿ç”¨sigmoidå‡½æ•°æ ¡å‡†
- **Isotonicæ ¡å‡†**: ä½¿ç”¨ä¿åºå›å½’æ ¡å‡†
- **é›†æˆæ ¡å‡†**: å¯¹æ•´ä¸ªé›†æˆæ¨¡å‹è¿›è¡Œæ ¡å‡†

## ğŸ”§ åŸºç¡€ç”¨æ³•

### Stackingç¤ºä¾‹

```python
from src.ensemble.stacking import StackingEnsemble
from sklearn.ensemble import RandomForestClassifier
from sklearn.linear_model import LogisticRegression

# å®šä¹‰åŸºç¡€æ¨¡å‹
base_models = [
    RandomForestClassifier(n_estimators=100),
    LogisticRegression()
]

# åˆ›å»ºStackingé›†æˆ
stacking = StackingEnsemble(
    base_models=base_models,
    meta_model=LogisticRegression(),
    cv=5
)

# è®­ç»ƒå’Œé¢„æµ‹
stacking.fit(X_train, y_train)
result = stacking.predict(X_test)
```

### Blendingç¤ºä¾‹

```python
from src.ensemble.blending import BlendingEnsemble

# åˆ›å»ºBlendingé›†æˆ
blending = BlendingEnsemble(
    base_models=base_models,
    meta_model=LogisticRegression(),
    holdout_size=0.2
)

# è®­ç»ƒå’Œé¢„æµ‹
blending.fit(X_train, y_train)
result = blending.predict(X_test)
```

### æ¨¡å‹æ ¡å‡†ç¤ºä¾‹

```python
from src.ensemble.calibration import CalibratedEnsemble, ModelCalibrator

# åˆ›å»ºæ ¡å‡†å™¨
calibrator = ModelCalibrator(method='platt')

# åˆ›å»ºæ ¡å‡†é›†æˆ
calibrated = CalibratedEnsemble(
    base_ensemble=stacking,
    calibrator=calibrator
)

# è®­ç»ƒå’Œé¢„æµ‹
calibrated.fit(X_train, y_train)
result = calibrated.predict(X_test)
```

## âš™ï¸ é«˜çº§é…ç½®

### å‚æ•°è¯´æ˜

#### StackingEnsembleå‚æ•°
- `base_models`: åŸºç¡€æ¨¡å‹åˆ—è¡¨
- `meta_model`: å…ƒå­¦ä¹ å™¨
- `cv`: äº¤å‰éªŒè¯æŠ˜æ•°
- `use_probas`: æ˜¯å¦ä½¿ç”¨æ¦‚ç‡é¢„æµ‹
- `use_features_in_secondary`: æ˜¯å¦åœ¨å…ƒå­¦ä¹ ä¸­ä½¿ç”¨åŸå§‹ç‰¹å¾
- `model_names`: æ¨¡å‹åç§°åˆ—è¡¨
- `verbose`: æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯

#### BlendingEnsembleå‚æ•°
- `base_models`: åŸºç¡€æ¨¡å‹åˆ—è¡¨
- `meta_model`: å…ƒå­¦ä¹ å™¨
- `holdout_size`: ä¿ç•™é›†å¤§å°æ¯”ä¾‹
- `random_state`: éšæœºç§å­
- `verbose`: æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯

#### CalibratedEnsembleå‚æ•°
- `base_ensemble`: åŸºç¡€é›†æˆæ¨¡å‹
- `calibrator`: æ ¡å‡†å™¨
- `cv`: äº¤å‰éªŒè¯æŠ˜æ•°

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ¨¡å‹é€‰æ‹©**
   - é€‰æ‹©å¤šæ ·æ€§å¼ºçš„åŸºç¡€æ¨¡å‹
   - é¿å…è¿‡äºç›¸ä¼¼çš„æ¨¡å‹

2. **å‚æ•°è°ƒä¼˜**
   - ä½¿ç”¨ç½‘æ ¼æœç´¢æˆ–éšæœºæœç´¢
   - æ³¨æ„äº¤å‰éªŒè¯çš„æŠ˜æ•°è®¾ç½®

3. **æ•°æ®å¤„ç†**
   - ç¡®ä¿æ•°æ®é¢„å¤„ç†çš„ä¸€è‡´æ€§
   - å¤„ç†ç¼ºå¤±å€¼å’Œå¼‚å¸¸å€¼

4. **è®¡ç®—æ•ˆç‡**
   - å¯¹äºå¤§æ•°æ®é›†ï¼Œè€ƒè™‘ä½¿ç”¨Blending
   - åˆç†è®¾ç½®äº¤å‰éªŒè¯æŠ˜æ•°

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
python test_ensemble_methods.py
```

æµ‹è¯•åŒ…æ‹¬ï¼š
- åˆ†ç±»å’Œå›å½’ä»»åŠ¡
- é”™è¯¯å¤„ç†
- æ€§èƒ½åŸºå‡†æµ‹è¯•
- è¾¹ç•Œæƒ…å†µæµ‹è¯•

## ğŸ“Š æ€§èƒ½æ¯”è¾ƒ

ä¸€èˆ¬æƒ…å†µä¸‹çš„æ€§èƒ½è¡¨ç°ï¼š

1. **Stacking**: é€šå¸¸æ€§èƒ½æœ€å¥½ï¼Œä½†è®¡ç®—æˆæœ¬è¾ƒé«˜
2. **Blending**: æ€§èƒ½è‰¯å¥½ï¼Œè®¡ç®—æ•ˆç‡è¾ƒé«˜
3. **æ ¡å‡†å**: æä¾›æ›´å¯é çš„æ¦‚ç‡é¢„æµ‹

## â— æ³¨æ„äº‹é¡¹

1. **æ•°æ®æ³„éœ²**: ç¡®ä¿æ­£ç¡®ä½¿ç”¨äº¤å‰éªŒè¯
2. **è¿‡æ‹Ÿåˆ**: ç›‘æ§éªŒè¯é›†æ€§èƒ½
3. **è®¡ç®—æˆæœ¬**: é›†æˆæ–¹æ³•éœ€è¦æ›´å¤šè®¡ç®—èµ„æº
4. **æ¨¡å‹è§£é‡Šæ€§**: é›†æˆæ¨¡å‹çš„å¯è§£é‡Šæ€§è¾ƒå·®

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å†…å­˜ä¸è¶³**
   - å‡å°‘åŸºç¡€æ¨¡å‹æ•°é‡
   - ä½¿ç”¨æ›´å°çš„æ•°æ®é›†è¿›è¡Œè°ƒè¯•

2. **è®­ç»ƒæ—¶é—´è¿‡é•¿**
   - å‡å°‘äº¤å‰éªŒè¯æŠ˜æ•°
   - ä½¿ç”¨æ›´ç®€å•çš„åŸºç¡€æ¨¡å‹

3. **æ€§èƒ½ä¸ä½³**
   - æ£€æŸ¥åŸºç¡€æ¨¡å‹çš„å¤šæ ·æ€§
   - è°ƒæ•´å…ƒå­¦ä¹ å™¨å‚æ•°

### é”™è¯¯å¤„ç†

æ‰€æœ‰é›†æˆæ–¹æ³•éƒ½åŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†ï¼š
- è‡ªåŠ¨è·³è¿‡å¤±è´¥çš„æ¨¡å‹
- è®°å½•è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- æä¾›é™çº§ç­–ç•¥

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
2. è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯ç¯å¢ƒ
3. æ£€æŸ¥æ•°æ®æ ¼å¼å’Œæ¨¡å‹å…¼å®¹æ€§

## ğŸ”„ æ›´æ–°æ—¥å¿—

- v1.0: åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«åŸºç¡€Stackingå’ŒBlending
- v1.1: æ·»åŠ æ¨¡å‹æ ¡å‡†åŠŸèƒ½
- v1.2: å®Œå–„é”™è¯¯å¤„ç†å’Œæ€§èƒ½ä¼˜åŒ–
- v1.3: æ·»åŠ è¯¦ç»†ç¤ºä¾‹å’Œæ–‡æ¡£